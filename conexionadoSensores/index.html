<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Sensores US e IR - Rupertobot</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css">

        <script src="../js/jquery-1.10.2.min.js" defer></script>
        <script src="../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">Rupertobot</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href=".." class="nav-link">Introducción</a>
                            </li>
                            <li class="navitem">
                                <a href="../about/" class="nav-link">¿Quién soy?</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Archivos <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../cad/archivosCAD/" class="dropdown-item">Archivos en FreeCAD (modificables)</a>
</li>
                                    
<li>
    <a href="../STL/archivosSTL/" class="dropdown-item">Archivos STL (para imprimir en 3D)</a>
</li>
                                </ul>
                            </li>
                            <li class="navitem">
                                <a href="../montaje/" class="nav-link">Instrucciones de montaje</a>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Conexionado <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../alimentacion/" class="dropdown-item">Alimentación</a>
</li>
                                    
<li>
    <a href="../conexionadoStepper/" class="dropdown-item">Motores paso a paso (stepper)</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active">Sensores US e IR</a>
</li>
                                    
<li>
    <a href="../conexionadoZumbador/" class="dropdown-item">Zumbador</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Ejemplos de programación <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../movimiento/" class="dropdown-item">Mover una rueda</a>
</li>
                                    
<li>
    <a href="../adelante/" class="dropdown-item">Hacia adelante</a>
</li>
                                    
<li>
    <a href="../atras/" class="dropdown-item">Hacia atras</a>
</li>
                                    
<li>
    <a href="../izquierdaDerecha/" class="dropdown-item">Cómo girar</a>
</li>
                                    
<li>
    <a href="../adelanteAtras/" class="dropdown-item">Uso de funciones(I)</a>
</li>
                                    
<li>
    <a href="../adelanteAtras2/" class="dropdown-item">Uso de funciones(II)</a>
</li>
                                </ul>
                            </li>
                            <li class="navitem">
                                <a href="../siguelineas/" class="nav-link">Rupertobot como siguelíneas</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../conexionadoStepper/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../conexionadoZumbador/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#conexionado-de-sensores-de-infrarrojos-y-ultrasonidos" class="nav-link">Conexionado de sensores de infrarrojos y ultrasonidos</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#sensor-de-ultrasonidos" class="nav-link">Sensor de ultrasonidos</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#sensores-de-infrarrojos" class="nav-link">Sensores de infrarrojos</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#resumen" class="nav-link">Resumen</a>
              <ul class="nav flex-column">
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="conexionado-de-sensores-de-infrarrojos-y-ultrasonidos">Conexionado de sensores de infrarrojos y ultrasonidos</h1>
<p>Estos sensores son muy sencillitos de instalar. Como verás, atacaremos, por un lado, su alimentación, y por otro lado, los pines digitales que comunicarán a la Arduino los cambios en el entorno que se detecten. Empecemos, pues.  </p>
<h2 id="sensor-de-ultrasonidos">Sensor de ultrasonidos</h2>
<p>(Extraído del primer manual del robot Masaylo): Detección de distancias por ultrasonidos
Como casi todos los otros campos de conocimientos tratados a lo largo de este texto relacionados con la Robótica Educativa, existe ya una extensa bibliografía en la red sobre el uso de módulos como el HC-SR04 o el PING de Parallax en la red. 
El principio básico de cualquier sensor de ultrasonidos es muy sencillo:    </p>
<ul>
<li>Un circuito emisor, comúnmente denominado “Trigger”, lanza un pulso de ultrasonidos (para ello, Arduino debe emitir un “1” en la patilla correspondiente).  </li>
<li>Un temporizador se pone a 0 y empieza a contar.  </li>
<li>Un circuito receptor, de nombre común “Echo”,  detecta el ultrasonido que ha rebotado (siempre que haya obstáculo) y envía un “1” lógico a una patilla de Arduino (puede ser o no la misma que hemos conectado al emisor, dependiendo del modelo).</li>
<li>Detectado el “1” lógico en el pin conectado a “Echo” el temporizador se para.</li>
<li>Conocida la velocidad del sonido (unos 343 m/sg), y que el sonido ha tenido que recorrer el espacio hasta el obstáculo dos veces, ida y vuelta, se realiza el cálculo correspondiente. En recorrer 1 cm, el tiempo que tarda el sonido es 0,000029155 sg. Teniendo en cuenta que la distancia es doble, un obstáculo localizado a 1 cm del sensor tardaría en detectarse 0,000058309 sg, es decir, 58,309 microsegundos, valor que utilizaremos para convertir el tiempo medido en distancia en cm.<br />
<img alt="Principio del sensor de ultrasonidos" src="../img/principioUltrasonidos.png" /></li>
</ul>
<p>¡Pero de eso nos preocuparemos más tarde!. El caso es que nosotros estamos utilizando el sensor HCSR04, que tiene a la sazón cuatro pines (la imagen está extraída de Wikipedia):<br />
<img alt="Imagen de sensor US" src="../img/hcsr04.jpg" />  </p>
<ul>
<li>Vcc y GND para la alimentación del sensor. Su conexión parece evidente.  </li>
<li>Un pin, TRIG, que es el que emitirá un pulso cuando se le de un "1" lógico.</li>
<li>Un pin, ECHO, que es el que enviará a la Arduino un "1" cuando detecte el pulso si éste encuentra un obstáculo y se ve rebotado de regreso.  </li>
</ul>
<table>
<thead>
<tr>
<th align="center"><strong>CONEXIÓN DEL HCSR04</strong></th>
<th align="center"></th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><strong>PATILLA DEL SENSOR</strong></td>
<td align="center"><strong>PIN DE ARDUINO</strong></td>
</tr>
<tr>
<td align="center">Vcc</td>
<td align="center">5V</td>
</tr>
<tr>
<td align="center">Trig</td>
<td align="center">10</td>
</tr>
<tr>
<td align="center">Echo</td>
<td align="center">11</td>
</tr>
<tr>
<td align="center">GND</td>
<td align="center">GND</td>
</tr>
<tr>
<td align="center"><img alt="Conexión sensor US" src="../img/conexionUS.jpg" /></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">Por supuesto, las patillas Trig y Echo puedes conectarlas a cualquier otro pin digital que te haya quedado libre (salvo el 0 y el 1, que no deben usarse por que son los pines que utiliza Arduino para comunicarse con tu ordenador mediante el puerto serie). En mi caso, utilizaré este conexionado para los ejemplos que iré desarrollando, por una mera cuestión de llevar un cierto orden.</td>
<td align="center"></td>
</tr>
</tbody>
</table>
<h2 id="sensores-de-infrarrojos">Sensores de infrarrojos</h2>
<p>(Extraído de mi primer libro sobre Masaylo):<br />
Un sensor de infrarrojos participa del mismo principio funcional que uno de ultrasonidos: se alimenta un diodo LED infrarrojo para que emita un pulso de luz,detectable por un fototransistor, en caso de haber rebotado en algún obstáculo. No obstante, este tipo de sensores presenta características propias que lo distingue de un sensor de ultrasonidos:  </p>
<p><strong>Ventajas</strong>  </p>
<ul>
<li>Son sensiblemente más baratos  </li>
<li>Disponen de un potenciómetro que permite ajustar la sensibilidad del sensor  </li>
<li>La emisión de la luz infrarroja es continua, no se necesita pin de control. Así que sólo hacen falta tres conexiones: V, GND y OUT (pin de señal). Son más fáciles de instalar y de manejo más simple por parte del sistema de control.  </li>
<li>Pueden detectar cambios, si no de color, sí de luminosidad en la superficie sobre la que apuntan, lo que les hace ideales para el diseño de robot siguelíneas  </li>
</ul>
<p><strong>Desventajas</strong>  </p>
<ul>
<li>Su rango de detección es sensiblemente más bajo que en el caso de los ultrasonidos. Raramente superan los 30 cm, en el mejor de los casos, en el FC-51</li>
<li>Su sensibilidad es muy vulnerable a los cambios de luz en la estancia en la que se encuentre el robot, lo que obliga a continuos reajustes mediante el potenciómetro anexo. En ocasiones es recomendable rodear el par formado por el LED y el fototransistor por algún tipo de capuchón improvisado con cinta o cartón que reduzca al máximo el ruido ocasionado por dichos cambios de luz.</li>
</ul>
<p>Nosotros utilizaremos estos sensores de infrarrojos, concretamente el modelo FC-51 (es el más popular, pero tú puedes montar el que te parezca), a derecha e izquierda del Rupertobot, a modo de detectores blanco/negro. Con ello, podremos programar al robot como siguelíneas negras en campo blanco, o al revés, ya que cada sensor enviará un "1" (<em>veo blanco</em>) o un "0" (<em>veo negro</em>), y el programa podrá saber si se está saliendo del camino por la derecha o por la izquierda. </p>
<p>Cada sensor tiene tres pines: Vcc y GND para alimentación, y OUT, que es el que dará un "1" o un "0" según lo que se encuentre:  </p>
<p><img alt="Sensor FC-51" src="../img/fc51.png" />  </p>
<table>
<thead>
<tr>
<th align="center"><strong>CONEXIÓN DEL SENSOR DERECHO</strong></th>
<th align="center"></th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><strong>PATILLA DEL SENSOR</strong></td>
<td align="center"><strong>PIN DE ARDUINO</strong></td>
</tr>
<tr>
<td align="center">Vcc</td>
<td align="center">5V</td>
</tr>
<tr>
<td align="center">OUT</td>
<td align="center">A0 (también se identifica como 14)</td>
</tr>
<tr>
<td align="center">GND</td>
<td align="center">GND</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th align="center"><strong>CONEXIÓN DEL SENSOR IZQUIERDO</strong></th>
<th align="center"></th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><strong>PATILLA DEL SENSOR</strong></td>
<td align="center"><strong>PIN DE ARDUINO</strong></td>
</tr>
<tr>
<td align="center">Vcc</td>
<td align="center">5V</td>
</tr>
<tr>
<td align="center">OUT</td>
<td align="center">A1 (también se identifica como 15)</td>
</tr>
<tr>
<td align="center">GND</td>
<td align="center">GND</td>
</tr>
</tbody>
</table>
<p>De nuevo, eres muy libre de cambiar el patillaje. Yo prefiero esta elección porque me reservo la patilla 12 para el zumbador (si la conecto al 13, sonaría de modo muy molesto al cargar los programas desde el ordenador), y me gusta que estos dos sensores vayan juntos.<br />
<img alt="Conexionado de sensores de infrarrojos" src="../img/sensoresIR.jpg" />  </p>
<h1 id="resumen">Resumen</h1>
<p>Usando sólo tres pines de nuestra queridísima Arduino, podemos dotar al Rupertobot de dos capacidades muy útiles: detectar obstáculos, cuya distancia puede medir, y detectar niveles de color (claro/oscuro) en el suelo que pisa. Con ello, podremos programarlo como salvaobstáculos, siguelíneas, resuelvelaberintos, y otro montón de palabras complejas muy chulas de usar. A medida que vayas familiarizándote con su programación, disfrutarás mucho de este pequeñuelo.  </p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js" defer></script>
        <script src="../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
